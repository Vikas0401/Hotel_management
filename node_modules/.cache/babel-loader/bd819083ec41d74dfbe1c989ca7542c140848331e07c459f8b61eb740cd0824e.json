{"ast":null,"code":"import _objectSpread from\"C:/Users/vkale/Documents/Vikas/Hotel_managenment/Hotel_management/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Bill History Service for managing saved bills\nimport{getCurrentUser,getCurrentHotelId}from'./authService';import jsPDF from'jspdf';import'jspdf-autotable';// Save bill to history\nexport const saveBillToHistory=billData=>{const hotelId=getCurrentHotelId();const user=getCurrentUser();if(!hotelId||!billData)return false;const billRecord={id:'BILL_'+Date.now(),billNumber:billData.billNumber,date:billData.date,time:billData.time,customerInfo:billData.customerInfo,items:billData.items,subtotal:billData.subtotal,tax:billData.tax,total:billData.total,paymentInfo:billData.paymentInfo||{jama:0,baki:billData.total||0},hotelName:user===null||user===void 0?void 0:user.hotelName,savedAt:new Date().toISOString(),savedBy:user===null||user===void 0?void 0:user.username};// Get existing bills for this hotel\nconst existingBills=getBillHistory();// Add new bill to the beginning of the array\nconst updatedBills=[billRecord,...existingBills];// Save to localStorage\nlocalStorage.setItem(\"bill_history_\".concat(hotelId),JSON.stringify(updatedBills));return billRecord.id;};// Get bill history for current hotel\nexport const getBillHistory=()=>{const hotelId=getCurrentHotelId();if(!hotelId)return[];const bills=localStorage.getItem(\"bill_history_\".concat(hotelId));return bills?JSON.parse(bills):[];};// Get bill by ID\nexport const getBillById=billId=>{const bills=getBillHistory();return bills.find(bill=>bill.id===billId);};// Delete bill from history\nexport const deleteBillFromHistory=billId=>{const hotelId=getCurrentHotelId();if(!hotelId)return false;const bills=getBillHistory();const updatedBills=bills.filter(bill=>bill.id!==billId);localStorage.setItem(\"bill_history_\".concat(hotelId),JSON.stringify(updatedBills));return true;};// Update payment information for a specific bill\nexport const updateBillPayment=(billId,paymentInfo)=>{const hotelId=getCurrentHotelId();if(!hotelId)return false;const bills=getBillHistory();const updatedBills=bills.map(bill=>{if(bill.id===billId){return _objectSpread(_objectSpread({},bill),{},{paymentInfo:{jama:paymentInfo.jama,baki:paymentInfo.baki},lastUpdated:new Date().toISOString()});}return bill;});localStorage.setItem(\"bill_history_\".concat(hotelId),JSON.stringify(updatedBills));return true;};// Filter bills by customer name and date range\nexport const filterBills=filters=>{const bills=getBillHistory();return bills.filter(bill=>{// Filter by customer name\nif(filters.customerName){var _bill$customerInfo,_bill$customerInfo$na;const customerName=((_bill$customerInfo=bill.customerInfo)===null||_bill$customerInfo===void 0?void 0:(_bill$customerInfo$na=_bill$customerInfo.name)===null||_bill$customerInfo$na===void 0?void 0:_bill$customerInfo$na.toLowerCase())||'';const searchName=filters.customerName.toLowerCase();if(!customerName.includes(searchName)){return false;}}// Filter by date range\nif(filters.startDate){const billDate=new Date(bill.date);const startDate=new Date(filters.startDate);if(billDate<startDate){return false;}}if(filters.endDate){const billDate=new Date(bill.date);const endDate=new Date(filters.endDate);if(billDate>endDate){return false;}}return true;});};// Get bill statistics\nexport const getBillStatistics=()=>{const bills=getBillHistory();const totalBills=bills.length;const totalRevenue=bills.reduce((sum,bill)=>sum+bill.total,0);const averageBillAmount=totalBills>0?totalRevenue/totalBills:0;// Get today's bills\nconst today=new Date().toLocaleDateString();const todaysBills=bills.filter(bill=>bill.date===today);const todaysRevenue=todaysBills.reduce((sum,bill)=>sum+bill.total,0);return{totalBills,totalRevenue,averageBillAmount,todaysBills:todaysBills.length,todaysRevenue};};// Export bills to PDF (for backup/download)\nexport const exportBillHistoryToPDF=()=>{var _statistics$totalReve,_statistics$todaysRev;const bills=getBillHistory();const user=getCurrentUser();const statistics=getBillStatistics();// Create new PDF document\nconst doc=new jsPDF();// Set up fonts and colors\ndoc.setFont('helvetica');// Header with VK Solutions branding\ndoc.setFillColor(102,126,234);// VK brand color\ndoc.rect(0,0,210,25,'F');// VK Solutions logo area (placeholder)\ndoc.setTextColor(255,255,255);doc.setFontSize(16);doc.setFont('helvetica','bold');doc.text('VK Solutions',15,12);doc.setFontSize(10);doc.setFont('helvetica','normal');doc.text('Professional Software Development',15,18);// Contact details on right\ndoc.text('+91 9689517133',160,12);doc.text('vikas4kale@gmail.com',160,18);// Hotel information\ndoc.setTextColor(0,0,0);doc.setFontSize(18);doc.setFont('helvetica','bold');doc.text(\"\".concat((user===null||user===void 0?void 0:user.hotelName)||'Hotel',\" - Bill History Report\"),15,40);// Date and statistics\ndoc.setFontSize(12);doc.setFont('helvetica','normal');const currentDate=new Date().toLocaleDateString();doc.text(\"Export Date: \".concat(currentDate),15,50);doc.text(\"Total Bills: \".concat(statistics.totalBills),15,58);doc.text(\"Total Revenue: \\u20B9\".concat(((_statistics$totalReve=statistics.totalRevenue)===null||_statistics$totalReve===void 0?void 0:_statistics$totalReve.toFixed(2))||'0.00'),15,66);doc.text(\"Today's Bills: \".concat(statistics.todaysBills),110,58);doc.text(\"Today's Revenue: \\u20B9\".concat(((_statistics$todaysRev=statistics.todaysRevenue)===null||_statistics$todaysRev===void 0?void 0:_statistics$todaysRev.toFixed(2))||'0.00'),110,66);// Prepare table data\nconst tableData=bills.map(bill=>{var _bill$customerInfo2,_bill$customerInfo3,_bill$total,_bill$paymentInfo,_bill$paymentInfo$jam,_bill$paymentInfo2,_bill$paymentInfo2$ba,_bill$total2;return[bill.billNumber,bill.date,((_bill$customerInfo2=bill.customerInfo)===null||_bill$customerInfo2===void 0?void 0:_bill$customerInfo2.name)||'-',((_bill$customerInfo3=bill.customerInfo)===null||_bill$customerInfo3===void 0?void 0:_bill$customerInfo3.tableNumber)||'-',\"\\u20B9\".concat(((_bill$total=bill.total)===null||_bill$total===void 0?void 0:_bill$total.toFixed(2))||'0.00'),\"\\u20B9\".concat(((_bill$paymentInfo=bill.paymentInfo)===null||_bill$paymentInfo===void 0?void 0:(_bill$paymentInfo$jam=_bill$paymentInfo.jama)===null||_bill$paymentInfo$jam===void 0?void 0:_bill$paymentInfo$jam.toFixed(2))||'0.00'),\"\\u20B9\".concat(((_bill$paymentInfo2=bill.paymentInfo)===null||_bill$paymentInfo2===void 0?void 0:(_bill$paymentInfo2$ba=_bill$paymentInfo2.baki)===null||_bill$paymentInfo2$ba===void 0?void 0:_bill$paymentInfo2$ba.toFixed(2))||((_bill$total2=bill.total)===null||_bill$total2===void 0?void 0:_bill$total2.toFixed(2))||'0.00')];});// Add table\ndoc.autoTable({head:[['Bill No.','Date','Customer','Table','Total Amount','Received (Jama)','Balance (Baki)']],body:tableData,startY:75,styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[102,126,234],textColor:[255,255,255],fontStyle:'bold'},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{4:{halign:'right'},// Total Amount\n5:{halign:'right'},// Jama\n6:{halign:'right',textColor:[220,53,69]}// Baki (red for pending)\n}});// Footer\nconst pageCount=doc.internal.getNumberOfPages();for(let i=1;i<=pageCount;i++){doc.setPage(i);// Add footer\ndoc.setFontSize(8);doc.setTextColor(128,128,128);doc.text('Generated by VK Solutions Hotel Management System',15,285);doc.text(\"Page \".concat(i,\" of \").concat(pageCount),180,285);// Add timestamp\nconst timestamp=new Date().toLocaleString();doc.text(\"Generated on: \".concat(timestamp),15,290);}return doc;};// Export single bill to PDF\nexport const exportSingleBillToPDF=bill=>{var _bill$customerInfo4,_bill$customerInfo5,_bill$customerInfo6,_bill$subtotal,_bill$tax,_bill$total3;const user=getCurrentUser();// Create new PDF document\nconst doc=new jsPDF();// Set up fonts and colors\ndoc.setFont('helvetica');// Header with VK Solutions branding\ndoc.setFillColor(102,126,234);doc.rect(0,0,210,25,'F');// VK Solutions branding\ndoc.setTextColor(255,255,255);doc.setFontSize(14);doc.setFont('helvetica','bold');doc.text('VK Solutions',15,12);doc.setFontSize(9);doc.setFont('helvetica','normal');doc.text('Professional Software Development',15,18);doc.text('+91 9689517133 | vikas4kale@gmail.com',15,22);// Hotel name and bill info\ndoc.setTextColor(0,0,0);doc.setFontSize(20);doc.setFont('helvetica','bold');doc.text(\"\".concat((user===null||user===void 0?void 0:user.hotelName)||'Hotel'),15,40);doc.setFontSize(16);doc.text(\"Bill Receipt - \".concat(bill.billNumber),15,50);// Bill details\ndoc.setFontSize(12);doc.setFont('helvetica','normal');doc.text(\"Date: \".concat(bill.date),15,65);doc.text(\"Time: \".concat(bill.time),15,72);// Customer information\nif((_bill$customerInfo4=bill.customerInfo)!==null&&_bill$customerInfo4!==void 0&&_bill$customerInfo4.name||(_bill$customerInfo5=bill.customerInfo)!==null&&_bill$customerInfo5!==void 0&&_bill$customerInfo5.tableNumber||(_bill$customerInfo6=bill.customerInfo)!==null&&_bill$customerInfo6!==void 0&&_bill$customerInfo6.phoneNumber){var _bill$customerInfo7,_bill$customerInfo8,_bill$customerInfo9;doc.setFont('helvetica','bold');doc.text('Customer Information:',15,85);doc.setFont('helvetica','normal');let yPos=92;if((_bill$customerInfo7=bill.customerInfo)!==null&&_bill$customerInfo7!==void 0&&_bill$customerInfo7.name){doc.text(\"Name: \".concat(bill.customerInfo.name),15,yPos);yPos+=7;}if((_bill$customerInfo8=bill.customerInfo)!==null&&_bill$customerInfo8!==void 0&&_bill$customerInfo8.tableNumber){doc.text(\"Table: \".concat(bill.customerInfo.tableNumber),15,yPos);yPos+=7;}if((_bill$customerInfo9=bill.customerInfo)!==null&&_bill$customerInfo9!==void 0&&_bill$customerInfo9.phoneNumber){doc.text(\"Phone: \".concat(bill.customerInfo.phoneNumber),15,yPos);yPos+=7;}}// Items table\nconst itemsData=bill.items.map(item=>[item.name,\"\\u20B9\".concat(item.rate),item.quantity.toString(),\"\\u20B9\".concat((item.rate*item.quantity).toFixed(2))]);doc.autoTable({head:[['Item','Rate','Qty','Amount']],body:itemsData,startY:110,styles:{fontSize:10,cellPadding:4},headStyles:{fillColor:[102,126,234],textColor:[255,255,255],fontStyle:'bold'},columnStyles:{1:{halign:'right'},2:{halign:'center'},3:{halign:'right'}}});// Bill summary\nconst finalY=doc.lastAutoTable.finalY+10;doc.setFont('helvetica','normal');doc.text(\"Subtotal: \\u20B9\".concat(((_bill$subtotal=bill.subtotal)===null||_bill$subtotal===void 0?void 0:_bill$subtotal.toFixed(2))||'0.00'),130,finalY);doc.text(\"GST (18%): \\u20B9\".concat(((_bill$tax=bill.tax)===null||_bill$tax===void 0?void 0:_bill$tax.toFixed(2))||'0.00'),130,finalY+7);doc.setFont('helvetica','bold');doc.setFontSize(14);doc.text(\"Total: \\u20B9\".concat(((_bill$total3=bill.total)===null||_bill$total3===void 0?void 0:_bill$total3.toFixed(2))||'0.00'),130,finalY+17);// Payment information\nif(bill.paymentInfo){var _bill$paymentInfo$jam2;doc.setFontSize(12);doc.text(\"Received (Jama): \\u20B9\".concat(((_bill$paymentInfo$jam2=bill.paymentInfo.jama)===null||_bill$paymentInfo$jam2===void 0?void 0:_bill$paymentInfo$jam2.toFixed(2))||'0.00'),130,finalY+27);const baki=bill.paymentInfo.baki||0;if(baki>0){doc.setTextColor(220,53,69);// Red for pending balance\n}else{doc.setTextColor(40,167,69);// Green for fully paid\n}doc.text(\"Balance (Baki): \\u20B9\".concat(baki.toFixed(2)),130,finalY+34);}// Thank you message\ndoc.setTextColor(0,0,0);doc.setFontSize(10);doc.setFont('helvetica','italic');doc.text(\"Thank you for visiting \".concat((user===null||user===void 0?void 0:user.hotelName)||'our hotel',\"!\"),15,finalY+50);// Footer\ndoc.setFontSize(8);doc.setTextColor(128,128,128);doc.text('Powered by VK Solutions Hotel Management System',15,280);const timestamp=new Date().toLocaleString();doc.text(\"Generated: \".concat(timestamp),15,285);return doc;};export const exportBillHistory=()=>{const bills=getBillHistory();const user=getCurrentUser();const exportData={hotelName:user===null||user===void 0?void 0:user.hotelName,exportDate:new Date().toISOString(),totalBills:bills.length,bills:bills};return JSON.stringify(exportData,null,2);};// Print single bill (for browser print)\nexport const printSingleBill=bill=>{var _bill$customerInfo0,_bill$customerInfo1,_bill$customerInfo10,_bill$customerInfo11,_bill$customerInfo12,_bill$customerInfo13,_bill$subtotal2,_bill$tax2,_bill$total4,_bill$paymentInfo$jam3;const user=getCurrentUser();// Create a new window for printing\nconst printWindow=window.open('','_blank');const printContent=\"\\n    <!DOCTYPE html>\\n    <html>\\n    <head>\\n        <title>Bill \".concat(bill.billNumber,\" - \").concat((user===null||user===void 0?void 0:user.hotelName)||'Hotel',\"</title>\\n        <style>\\n            body {\\n                font-family: Arial, sans-serif;\\n                margin: 20px;\\n                color: #333;\\n            }\\n            .header {\\n                text-align: center;\\n                border-bottom: 2px solid #667eea;\\n                padding-bottom: 15px;\\n                margin-bottom: 20px;\\n            }\\n            .vk-branding {\\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n                color: white;\\n                padding: 10px;\\n                margin: -20px -20px 20px -20px;\\n                font-size: 12px;\\n            }\\n            .hotel-name {\\n                font-size: 24px;\\n                font-weight: bold;\\n                color: #2c3e50;\\n                margin: 10px 0;\\n            }\\n            .bill-info {\\n                display: flex;\\n                justify-content: space-between;\\n                margin-bottom: 20px;\\n                border-bottom: 1px solid #ddd;\\n                padding-bottom: 10px;\\n            }\\n            .customer-info {\\n                margin-bottom: 20px;\\n                background: #f8f9fa;\\n                padding: 15px;\\n                border-radius: 5px;\\n            }\\n            table {\\n                width: 100%;\\n                border-collapse: collapse;\\n                margin-bottom: 20px;\\n            }\\n            th, td {\\n                border: 1px solid #ddd;\\n                padding: 8px;\\n                text-align: left;\\n            }\\n            th {\\n                background-color: #667eea;\\n                color: white;\\n                font-weight: bold;\\n            }\\n            .amount-col {\\n                text-align: right;\\n            }\\n            .bill-summary {\\n                text-align: right;\\n                font-size: 14px;\\n            }\\n            .total-row {\\n                font-size: 18px;\\n                font-weight: bold;\\n                color: #2c3e50;\\n                border-top: 2px solid #667eea;\\n                padding-top: 10px;\\n                margin-top: 10px;\\n            }\\n            .payment-info {\\n                background: #e8f4fd;\\n                padding: 15px;\\n                border-radius: 5px;\\n                margin: 15px 0;\\n                border: 1px solid #0066cc;\\n            }\\n            .footer {\\n                text-align: center;\\n                margin-top: 30px;\\n                font-size: 12px;\\n                color: #666;\\n            }\\n            @media print {\\n                body { margin: 0; }\\n                .vk-branding { margin: 0; }\\n            }\\n        </style>\\n    </head>\\n    <body>\\n        <div class=\\\"vk-branding\\\">\\n            <div style=\\\"display: flex; justify-content: space-between; align-items: center;\\\">\\n                <div>\\n                    <strong>VK Solutions</strong> - Professional Software Development\\n                </div>\\n                <div>\\n                    \\uD83D\\uDCF1 +91 9689517133 | \\uD83D\\uDCE7 vikas4kale@gmail.com\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"header\\\">\\n            <div class=\\\"hotel-name\\\">\").concat((user===null||user===void 0?void 0:user.hotelName)||'Hotel',\"</div>\\n            <div>Bill Receipt</div>\\n        </div>\\n\\n        <div class=\\\"bill-info\\\">\\n            <div><strong>Bill No:</strong> \").concat(bill.billNumber,\"</div>\\n            <div><strong>Date:</strong> \").concat(bill.date,\"</div>\\n            <div><strong>Time:</strong> \").concat(bill.time,\"</div>\\n        </div>\\n\\n        \").concat((_bill$customerInfo0=bill.customerInfo)!==null&&_bill$customerInfo0!==void 0&&_bill$customerInfo0.name||(_bill$customerInfo1=bill.customerInfo)!==null&&_bill$customerInfo1!==void 0&&_bill$customerInfo1.tableNumber||(_bill$customerInfo10=bill.customerInfo)!==null&&_bill$customerInfo10!==void 0&&_bill$customerInfo10.phoneNumber?\"\\n        <div class=\\\"customer-info\\\">\\n            <h3>Customer Information</h3>\\n            \".concat((_bill$customerInfo11=bill.customerInfo)!==null&&_bill$customerInfo11!==void 0&&_bill$customerInfo11.name?\"<p><strong>Name:</strong> \".concat(bill.customerInfo.name,\"</p>\"):'',\"\\n            \").concat((_bill$customerInfo12=bill.customerInfo)!==null&&_bill$customerInfo12!==void 0&&_bill$customerInfo12.tableNumber?\"<p><strong>Table:</strong> \".concat(bill.customerInfo.tableNumber,\"</p>\"):'',\"\\n            \").concat((_bill$customerInfo13=bill.customerInfo)!==null&&_bill$customerInfo13!==void 0&&_bill$customerInfo13.phoneNumber?\"<p><strong>Phone:</strong> \".concat(bill.customerInfo.phoneNumber,\"</p>\"):'',\"\\n        </div>\\n        \"):'',\"\\n\\n        <table>\\n            <thead>\\n                <tr>\\n                    <th>Item</th>\\n                    <th>Rate</th>\\n                    <th>Qty</th>\\n                    <th class=\\\"amount-col\\\">Amount</th>\\n                </tr>\\n            </thead>\\n            <tbody>\\n                \").concat(bill.items.map(item=>\"\\n                    <tr>\\n                        <td>\".concat(item.name,\"</td>\\n                        <td>\\u20B9\").concat(item.rate,\"</td>\\n                        <td>\").concat(item.quantity,\"</td>\\n                        <td class=\\\"amount-col\\\">\\u20B9\").concat((item.rate*item.quantity).toFixed(2),\"</td>\\n                    </tr>\\n                \")).join(''),\"\\n            </tbody>\\n        </table>\\n\\n        <div class=\\\"bill-summary\\\">\\n            <div>Subtotal: \\u20B9\").concat(((_bill$subtotal2=bill.subtotal)===null||_bill$subtotal2===void 0?void 0:_bill$subtotal2.toFixed(2))||'0.00',\"</div>\\n            <div>GST (18%): \\u20B9\").concat(((_bill$tax2=bill.tax)===null||_bill$tax2===void 0?void 0:_bill$tax2.toFixed(2))||'0.00',\"</div>\\n            <div class=\\\"total-row\\\">Total: \\u20B9\").concat(((_bill$total4=bill.total)===null||_bill$total4===void 0?void 0:_bill$total4.toFixed(2))||'0.00',\"</div>\\n        </div>\\n\\n        \").concat(bill.paymentInfo?\"\\n        <div class=\\\"payment-info\\\">\\n            <h3>Payment Information</h3>\\n            <div style=\\\"display: flex; justify-content: space-between;\\\">\\n                <span>Received (\\u091C\\u092E\\u093E):</span>\\n                <span>\\u20B9\".concat(((_bill$paymentInfo$jam3=bill.paymentInfo.jama)===null||_bill$paymentInfo$jam3===void 0?void 0:_bill$paymentInfo$jam3.toFixed(2))||'0.00',\"</span>\\n            </div>\\n            <div style=\\\"display: flex; justify-content: space-between; margin-top: 10px; font-weight: bold; color: \").concat((bill.paymentInfo.baki||0)>0?'#dc3545':'#28a745',\";\\\">\\n                <span>Balance (\\u092C\\u093E\\u0915\\u0940):</span>\\n                <span>\\u20B9\").concat((bill.paymentInfo.baki||bill.total||0).toFixed(2),\"</span>\\n            </div>\\n        </div>\\n        \"):'',\"\\n\\n        <div class=\\\"footer\\\">\\n            <p>Thank you for visiting \").concat((user===null||user===void 0?void 0:user.hotelName)||'our hotel',\"!</p>\\n            <p>Powered by VK Solutions Hotel Management System</p>\\n        </div>\\n\\n        <script>\\n            window.onload = function() {\\n                window.print();\\n                window.onafterprint = function() {\\n                    window.close();\\n                };\\n            };\\n        </script>\\n    </body>\\n    </html>\\n    \");printWindow.document.write(printContent);printWindow.document.close();return true;};","map":{"version":3,"names":["getCurrentUser","getCurrentHotelId","jsPDF","saveBillToHistory","billData","hotelId","user","billRecord","id","Date","now","billNumber","date","time","customerInfo","items","subtotal","tax","total","paymentInfo","jama","baki","hotelName","savedAt","toISOString","savedBy","username","existingBills","getBillHistory","updatedBills","localStorage","setItem","concat","JSON","stringify","bills","getItem","parse","getBillById","billId","find","bill","deleteBillFromHistory","filter","updateBillPayment","map","_objectSpread","lastUpdated","filterBills","filters","customerName","_bill$customerInfo","_bill$customerInfo$na","name","toLowerCase","searchName","includes","startDate","billDate","endDate","getBillStatistics","totalBills","length","totalRevenue","reduce","sum","averageBillAmount","today","toLocaleDateString","todaysBills","todaysRevenue","exportBillHistoryToPDF","_statistics$totalReve","_statistics$todaysRev","statistics","doc","setFont","setFillColor","rect","setTextColor","setFontSize","text","currentDate","toFixed","tableData","_bill$customerInfo2","_bill$customerInfo3","_bill$total","_bill$paymentInfo","_bill$paymentInfo$jam","_bill$paymentInfo2","_bill$paymentInfo2$ba","_bill$total2","tableNumber","autoTable","head","body","startY","styles","fontSize","cellPadding","headStyles","fillColor","textColor","fontStyle","alternateRowStyles","columnStyles","halign","pageCount","internal","getNumberOfPages","i","setPage","timestamp","toLocaleString","exportSingleBillToPDF","_bill$customerInfo4","_bill$customerInfo5","_bill$customerInfo6","_bill$subtotal","_bill$tax","_bill$total3","phoneNumber","_bill$customerInfo7","_bill$customerInfo8","_bill$customerInfo9","yPos","itemsData","item","rate","quantity","toString","finalY","lastAutoTable","_bill$paymentInfo$jam2","exportBillHistory","exportData","exportDate","printSingleBill","_bill$customerInfo0","_bill$customerInfo1","_bill$customerInfo10","_bill$customerInfo11","_bill$customerInfo12","_bill$customerInfo13","_bill$subtotal2","_bill$tax2","_bill$total4","_bill$paymentInfo$jam3","printWindow","window","open","printContent","join","document","write","close"],"sources":["C:/Users/vkale/Documents/Vikas/Hotel_managenment/Hotel_management/src/services/billHistoryService.js"],"sourcesContent":["// Bill History Service for managing saved bills\r\nimport { getCurrentUser, getCurrentHotelId } from './authService';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\n// Save bill to history\r\nexport const saveBillToHistory = (billData) => {\r\n    const hotelId = getCurrentHotelId();\r\n    const user = getCurrentUser();\r\n    \r\n    if (!hotelId || !billData) return false;\r\n    \r\n    const billRecord = {\r\n        id: 'BILL_' + Date.now(),\r\n        billNumber: billData.billNumber,\r\n        date: billData.date,\r\n        time: billData.time,\r\n        customerInfo: billData.customerInfo,\r\n        items: billData.items,\r\n        subtotal: billData.subtotal,\r\n        tax: billData.tax,\r\n        total: billData.total,\r\n        paymentInfo: billData.paymentInfo || { jama: 0, baki: billData.total || 0 },\r\n        hotelName: user?.hotelName,\r\n        savedAt: new Date().toISOString(),\r\n        savedBy: user?.username\r\n    };\r\n    \r\n    // Get existing bills for this hotel\r\n    const existingBills = getBillHistory();\r\n    \r\n    // Add new bill to the beginning of the array\r\n    const updatedBills = [billRecord, ...existingBills];\r\n    \r\n    // Save to localStorage\r\n    localStorage.setItem(`bill_history_${hotelId}`, JSON.stringify(updatedBills));\r\n    \r\n    return billRecord.id;\r\n};\r\n\r\n// Get bill history for current hotel\r\nexport const getBillHistory = () => {\r\n    const hotelId = getCurrentHotelId();\r\n    if (!hotelId) return [];\r\n    \r\n    const bills = localStorage.getItem(`bill_history_${hotelId}`);\r\n    return bills ? JSON.parse(bills) : [];\r\n};\r\n\r\n// Get bill by ID\r\nexport const getBillById = (billId) => {\r\n    const bills = getBillHistory();\r\n    return bills.find(bill => bill.id === billId);\r\n};\r\n\r\n// Delete bill from history\r\nexport const deleteBillFromHistory = (billId) => {\r\n    const hotelId = getCurrentHotelId();\r\n    if (!hotelId) return false;\r\n    \r\n    const bills = getBillHistory();\r\n    const updatedBills = bills.filter(bill => bill.id !== billId);\r\n    \r\n    localStorage.setItem(`bill_history_${hotelId}`, JSON.stringify(updatedBills));\r\n    return true;\r\n};\r\n\r\n// Update payment information for a specific bill\r\nexport const updateBillPayment = (billId, paymentInfo) => {\r\n    const hotelId = getCurrentHotelId();\r\n    if (!hotelId) return false;\r\n    \r\n    const bills = getBillHistory();\r\n    const updatedBills = bills.map(bill => {\r\n        if (bill.id === billId) {\r\n            return {\r\n                ...bill,\r\n                paymentInfo: {\r\n                    jama: paymentInfo.jama,\r\n                    baki: paymentInfo.baki\r\n                },\r\n                lastUpdated: new Date().toISOString()\r\n            };\r\n        }\r\n        return bill;\r\n    });\r\n    \r\n    localStorage.setItem(`bill_history_${hotelId}`, JSON.stringify(updatedBills));\r\n    return true;\r\n};\r\n\r\n// Filter bills by customer name and date range\r\nexport const filterBills = (filters) => {\r\n    const bills = getBillHistory();\r\n    \r\n    return bills.filter(bill => {\r\n        // Filter by customer name\r\n        if (filters.customerName) {\r\n            const customerName = bill.customerInfo?.name?.toLowerCase() || '';\r\n            const searchName = filters.customerName.toLowerCase();\r\n            if (!customerName.includes(searchName)) {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        // Filter by date range\r\n        if (filters.startDate) {\r\n            const billDate = new Date(bill.date);\r\n            const startDate = new Date(filters.startDate);\r\n            if (billDate < startDate) {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        if (filters.endDate) {\r\n            const billDate = new Date(bill.date);\r\n            const endDate = new Date(filters.endDate);\r\n            if (billDate > endDate) {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        return true;\r\n    });\r\n};\r\n\r\n// Get bill statistics\r\nexport const getBillStatistics = () => {\r\n    const bills = getBillHistory();\r\n    \r\n    const totalBills = bills.length;\r\n    const totalRevenue = bills.reduce((sum, bill) => sum + bill.total, 0);\r\n    const averageBillAmount = totalBills > 0 ? totalRevenue / totalBills : 0;\r\n    \r\n    // Get today's bills\r\n    const today = new Date().toLocaleDateString();\r\n    const todaysBills = bills.filter(bill => bill.date === today);\r\n    const todaysRevenue = todaysBills.reduce((sum, bill) => sum + bill.total, 0);\r\n    \r\n    return {\r\n        totalBills,\r\n        totalRevenue,\r\n        averageBillAmount,\r\n        todaysBills: todaysBills.length,\r\n        todaysRevenue\r\n    };\r\n};\r\n\r\n// Export bills to PDF (for backup/download)\r\nexport const exportBillHistoryToPDF = () => {\r\n    const bills = getBillHistory();\r\n    const user = getCurrentUser();\r\n    const statistics = getBillStatistics();\r\n    \r\n    // Create new PDF document\r\n    const doc = new jsPDF();\r\n    \r\n    // Set up fonts and colors\r\n    doc.setFont('helvetica');\r\n    \r\n    // Header with VK Solutions branding\r\n    doc.setFillColor(102, 126, 234); // VK brand color\r\n    doc.rect(0, 0, 210, 25, 'F');\r\n    \r\n    // VK Solutions logo area (placeholder)\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(16);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('VK Solutions', 15, 12);\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text('Professional Software Development', 15, 18);\r\n    \r\n    // Contact details on right\r\n    doc.text('+91 9689517133', 160, 12);\r\n    doc.text('vikas4kale@gmail.com', 160, 18);\r\n    \r\n    // Hotel information\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.setFontSize(18);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(`${user?.hotelName || 'Hotel'} - Bill History Report`, 15, 40);\r\n    \r\n    // Date and statistics\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'normal');\r\n    const currentDate = new Date().toLocaleDateString();\r\n    doc.text(`Export Date: ${currentDate}`, 15, 50);\r\n    doc.text(`Total Bills: ${statistics.totalBills}`, 15, 58);\r\n    doc.text(`Total Revenue: ₹${statistics.totalRevenue?.toFixed(2) || '0.00'}`, 15, 66);\r\n    doc.text(`Today's Bills: ${statistics.todaysBills}`, 110, 58);\r\n    doc.text(`Today's Revenue: ₹${statistics.todaysRevenue?.toFixed(2) || '0.00'}`, 110, 66);\r\n    \r\n    // Prepare table data\r\n    const tableData = bills.map(bill => [\r\n        bill.billNumber,\r\n        bill.date,\r\n        bill.customerInfo?.name || '-',\r\n        bill.customerInfo?.tableNumber || '-',\r\n        `₹${bill.total?.toFixed(2) || '0.00'}`,\r\n        `₹${bill.paymentInfo?.jama?.toFixed(2) || '0.00'}`,\r\n        `₹${bill.paymentInfo?.baki?.toFixed(2) || bill.total?.toFixed(2) || '0.00'}`\r\n    ]);\r\n    \r\n    // Add table\r\n    doc.autoTable({\r\n        head: [['Bill No.', 'Date', 'Customer', 'Table', 'Total Amount', 'Received (Jama)', 'Balance (Baki)']],\r\n        body: tableData,\r\n        startY: 75,\r\n        styles: {\r\n            fontSize: 9,\r\n            cellPadding: 3,\r\n        },\r\n        headStyles: {\r\n            fillColor: [102, 126, 234],\r\n            textColor: [255, 255, 255],\r\n            fontStyle: 'bold'\r\n        },\r\n        alternateRowStyles: {\r\n            fillColor: [248, 249, 250]\r\n        },\r\n        columnStyles: {\r\n            4: { halign: 'right' }, // Total Amount\r\n            5: { halign: 'right' }, // Jama\r\n            6: { halign: 'right', textColor: [220, 53, 69] } // Baki (red for pending)\r\n        }\r\n    });\r\n    \r\n    // Footer\r\n    const pageCount = doc.internal.getNumberOfPages();\r\n    for (let i = 1; i <= pageCount; i++) {\r\n        doc.setPage(i);\r\n        \r\n        // Add footer\r\n        doc.setFontSize(8);\r\n        doc.setTextColor(128, 128, 128);\r\n        doc.text('Generated by VK Solutions Hotel Management System', 15, 285);\r\n        doc.text(`Page ${i} of ${pageCount}`, 180, 285);\r\n        \r\n        // Add timestamp\r\n        const timestamp = new Date().toLocaleString();\r\n        doc.text(`Generated on: ${timestamp}`, 15, 290);\r\n    }\r\n    \r\n    return doc;\r\n};\r\n\r\n// Export single bill to PDF\r\nexport const exportSingleBillToPDF = (bill) => {\r\n    const user = getCurrentUser();\r\n    \r\n    // Create new PDF document\r\n    const doc = new jsPDF();\r\n    \r\n    // Set up fonts and colors\r\n    doc.setFont('helvetica');\r\n    \r\n    // Header with VK Solutions branding\r\n    doc.setFillColor(102, 126, 234);\r\n    doc.rect(0, 0, 210, 25, 'F');\r\n    \r\n    // VK Solutions branding\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('VK Solutions', 15, 12);\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text('Professional Software Development', 15, 18);\r\n    doc.text('+91 9689517133 | vikas4kale@gmail.com', 15, 22);\r\n    \r\n    // Hotel name and bill info\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.setFontSize(20);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(`${user?.hotelName || 'Hotel'}`, 15, 40);\r\n    \r\n    doc.setFontSize(16);\r\n    doc.text(`Bill Receipt - ${bill.billNumber}`, 15, 50);\r\n    \r\n    // Bill details\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date: ${bill.date}`, 15, 65);\r\n    doc.text(`Time: ${bill.time}`, 15, 72);\r\n    \r\n    // Customer information\r\n    if (bill.customerInfo?.name || bill.customerInfo?.tableNumber || bill.customerInfo?.phoneNumber) {\r\n        doc.setFont('helvetica', 'bold');\r\n        doc.text('Customer Information:', 15, 85);\r\n        doc.setFont('helvetica', 'normal');\r\n        \r\n        let yPos = 92;\r\n        if (bill.customerInfo?.name) {\r\n            doc.text(`Name: ${bill.customerInfo.name}`, 15, yPos);\r\n            yPos += 7;\r\n        }\r\n        if (bill.customerInfo?.tableNumber) {\r\n            doc.text(`Table: ${bill.customerInfo.tableNumber}`, 15, yPos);\r\n            yPos += 7;\r\n        }\r\n        if (bill.customerInfo?.phoneNumber) {\r\n            doc.text(`Phone: ${bill.customerInfo.phoneNumber}`, 15, yPos);\r\n            yPos += 7;\r\n        }\r\n    }\r\n    \r\n    // Items table\r\n    const itemsData = bill.items.map(item => [\r\n        item.name,\r\n        `₹${item.rate}`,\r\n        item.quantity.toString(),\r\n        `₹${(item.rate * item.quantity).toFixed(2)}`\r\n    ]);\r\n    \r\n    doc.autoTable({\r\n        head: [['Item', 'Rate', 'Qty', 'Amount']],\r\n        body: itemsData,\r\n        startY: 110,\r\n        styles: {\r\n            fontSize: 10,\r\n            cellPadding: 4,\r\n        },\r\n        headStyles: {\r\n            fillColor: [102, 126, 234],\r\n            textColor: [255, 255, 255],\r\n            fontStyle: 'bold'\r\n        },\r\n        columnStyles: {\r\n            1: { halign: 'right' },\r\n            2: { halign: 'center' },\r\n            3: { halign: 'right' }\r\n        }\r\n    });\r\n    \r\n    // Bill summary\r\n    const finalY = doc.lastAutoTable.finalY + 10;\r\n    \r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Subtotal: ₹${bill.subtotal?.toFixed(2) || '0.00'}`, 130, finalY);\r\n    doc.text(`GST (18%): ₹${bill.tax?.toFixed(2) || '0.00'}`, 130, finalY + 7);\r\n    \r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(14);\r\n    doc.text(`Total: ₹${bill.total?.toFixed(2) || '0.00'}`, 130, finalY + 17);\r\n    \r\n    // Payment information\r\n    if (bill.paymentInfo) {\r\n        doc.setFontSize(12);\r\n        doc.text(`Received (Jama): ₹${bill.paymentInfo.jama?.toFixed(2) || '0.00'}`, 130, finalY + 27);\r\n        \r\n        const baki = bill.paymentInfo.baki || 0;\r\n        if (baki > 0) {\r\n            doc.setTextColor(220, 53, 69); // Red for pending balance\r\n        } else {\r\n            doc.setTextColor(40, 167, 69); // Green for fully paid\r\n        }\r\n        doc.text(`Balance (Baki): ₹${baki.toFixed(2)}`, 130, finalY + 34);\r\n    }\r\n    \r\n    // Thank you message\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'italic');\r\n    doc.text(`Thank you for visiting ${user?.hotelName || 'our hotel'}!`, 15, finalY + 50);\r\n    \r\n    // Footer\r\n    doc.setFontSize(8);\r\n    doc.setTextColor(128, 128, 128);\r\n    doc.text('Powered by VK Solutions Hotel Management System', 15, 280);\r\n    const timestamp = new Date().toLocaleString();\r\n    doc.text(`Generated: ${timestamp}`, 15, 285);\r\n    \r\n    return doc;\r\n};\r\nexport const exportBillHistory = () => {\r\n    const bills = getBillHistory();\r\n    const user = getCurrentUser();\r\n    \r\n    const exportData = {\r\n        hotelName: user?.hotelName,\r\n        exportDate: new Date().toISOString(),\r\n        totalBills: bills.length,\r\n        bills: bills\r\n    };\r\n    \r\n    return JSON.stringify(exportData, null, 2);\r\n};\r\n\r\n// Print single bill (for browser print)\r\nexport const printSingleBill = (bill) => {\r\n    const user = getCurrentUser();\r\n    \r\n    // Create a new window for printing\r\n    const printWindow = window.open('', '_blank');\r\n    \r\n    const printContent = `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n        <title>Bill ${bill.billNumber} - ${user?.hotelName || 'Hotel'}</title>\r\n        <style>\r\n            body {\r\n                font-family: Arial, sans-serif;\r\n                margin: 20px;\r\n                color: #333;\r\n            }\r\n            .header {\r\n                text-align: center;\r\n                border-bottom: 2px solid #667eea;\r\n                padding-bottom: 15px;\r\n                margin-bottom: 20px;\r\n            }\r\n            .vk-branding {\r\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n                color: white;\r\n                padding: 10px;\r\n                margin: -20px -20px 20px -20px;\r\n                font-size: 12px;\r\n            }\r\n            .hotel-name {\r\n                font-size: 24px;\r\n                font-weight: bold;\r\n                color: #2c3e50;\r\n                margin: 10px 0;\r\n            }\r\n            .bill-info {\r\n                display: flex;\r\n                justify-content: space-between;\r\n                margin-bottom: 20px;\r\n                border-bottom: 1px solid #ddd;\r\n                padding-bottom: 10px;\r\n            }\r\n            .customer-info {\r\n                margin-bottom: 20px;\r\n                background: #f8f9fa;\r\n                padding: 15px;\r\n                border-radius: 5px;\r\n            }\r\n            table {\r\n                width: 100%;\r\n                border-collapse: collapse;\r\n                margin-bottom: 20px;\r\n            }\r\n            th, td {\r\n                border: 1px solid #ddd;\r\n                padding: 8px;\r\n                text-align: left;\r\n            }\r\n            th {\r\n                background-color: #667eea;\r\n                color: white;\r\n                font-weight: bold;\r\n            }\r\n            .amount-col {\r\n                text-align: right;\r\n            }\r\n            .bill-summary {\r\n                text-align: right;\r\n                font-size: 14px;\r\n            }\r\n            .total-row {\r\n                font-size: 18px;\r\n                font-weight: bold;\r\n                color: #2c3e50;\r\n                border-top: 2px solid #667eea;\r\n                padding-top: 10px;\r\n                margin-top: 10px;\r\n            }\r\n            .payment-info {\r\n                background: #e8f4fd;\r\n                padding: 15px;\r\n                border-radius: 5px;\r\n                margin: 15px 0;\r\n                border: 1px solid #0066cc;\r\n            }\r\n            .footer {\r\n                text-align: center;\r\n                margin-top: 30px;\r\n                font-size: 12px;\r\n                color: #666;\r\n            }\r\n            @media print {\r\n                body { margin: 0; }\r\n                .vk-branding { margin: 0; }\r\n            }\r\n        </style>\r\n    </head>\r\n    <body>\r\n        <div class=\"vk-branding\">\r\n            <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n                <div>\r\n                    <strong>VK Solutions</strong> - Professional Software Development\r\n                </div>\r\n                <div>\r\n                    📱 +91 9689517133 | 📧 vikas4kale@gmail.com\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"header\">\r\n            <div class=\"hotel-name\">${user?.hotelName || 'Hotel'}</div>\r\n            <div>Bill Receipt</div>\r\n        </div>\r\n\r\n        <div class=\"bill-info\">\r\n            <div><strong>Bill No:</strong> ${bill.billNumber}</div>\r\n            <div><strong>Date:</strong> ${bill.date}</div>\r\n            <div><strong>Time:</strong> ${bill.time}</div>\r\n        </div>\r\n\r\n        ${(bill.customerInfo?.name || bill.customerInfo?.tableNumber || bill.customerInfo?.phoneNumber) ? `\r\n        <div class=\"customer-info\">\r\n            <h3>Customer Information</h3>\r\n            ${bill.customerInfo?.name ? `<p><strong>Name:</strong> ${bill.customerInfo.name}</p>` : ''}\r\n            ${bill.customerInfo?.tableNumber ? `<p><strong>Table:</strong> ${bill.customerInfo.tableNumber}</p>` : ''}\r\n            ${bill.customerInfo?.phoneNumber ? `<p><strong>Phone:</strong> ${bill.customerInfo.phoneNumber}</p>` : ''}\r\n        </div>\r\n        ` : ''}\r\n\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Item</th>\r\n                    <th>Rate</th>\r\n                    <th>Qty</th>\r\n                    <th class=\"amount-col\">Amount</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${bill.items.map(item => `\r\n                    <tr>\r\n                        <td>${item.name}</td>\r\n                        <td>₹${item.rate}</td>\r\n                        <td>${item.quantity}</td>\r\n                        <td class=\"amount-col\">₹${(item.rate * item.quantity).toFixed(2)}</td>\r\n                    </tr>\r\n                `).join('')}\r\n            </tbody>\r\n        </table>\r\n\r\n        <div class=\"bill-summary\">\r\n            <div>Subtotal: ₹${bill.subtotal?.toFixed(2) || '0.00'}</div>\r\n            <div>GST (18%): ₹${bill.tax?.toFixed(2) || '0.00'}</div>\r\n            <div class=\"total-row\">Total: ₹${bill.total?.toFixed(2) || '0.00'}</div>\r\n        </div>\r\n\r\n        ${bill.paymentInfo ? `\r\n        <div class=\"payment-info\">\r\n            <h3>Payment Information</h3>\r\n            <div style=\"display: flex; justify-content: space-between;\">\r\n                <span>Received (जमा):</span>\r\n                <span>₹${bill.paymentInfo.jama?.toFixed(2) || '0.00'}</span>\r\n            </div>\r\n            <div style=\"display: flex; justify-content: space-between; margin-top: 10px; font-weight: bold; color: ${(bill.paymentInfo.baki || 0) > 0 ? '#dc3545' : '#28a745'};\">\r\n                <span>Balance (बाकी):</span>\r\n                <span>₹${(bill.paymentInfo.baki || bill.total || 0).toFixed(2)}</span>\r\n            </div>\r\n        </div>\r\n        ` : ''}\r\n\r\n        <div class=\"footer\">\r\n            <p>Thank you for visiting ${user?.hotelName || 'our hotel'}!</p>\r\n            <p>Powered by VK Solutions Hotel Management System</p>\r\n        </div>\r\n\r\n        <script>\r\n            window.onload = function() {\r\n                window.print();\r\n                window.onafterprint = function() {\r\n                    window.close();\r\n                };\r\n            };\r\n        </script>\r\n    </body>\r\n    </html>\r\n    `;\r\n    \r\n    printWindow.document.write(printContent);\r\n    printWindow.document.close();\r\n    \r\n    return true;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vkale\\\\Documents\\\\Vikas\\\\New project\\\\hotel-website\\\\src\\\\pages\\\\MenuPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport FoodEntry from '../components/FoodMenu/FoodEntry';\nimport FoodSelection from '../components/FoodMenu/FoodSelection';\nimport MenuManagement from '../components/Menu/MenuManagement';\nimport { getCurrentUser } from '../services/authService';\nimport '../styles/components/FoodMenu.css';\nimport '../styles/components/MenuManagement.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MenuPage = () => {\n  _s();\n  const [selectedFoods, setSelectedFoods] = useState([]);\n  const [showManagement, setShowManagement] = useState(false);\n  const [user, setUser] = useState(null);\n  const [menuKey, setMenuKey] = useState(0); // Force re-render when menu updates\n\n  useEffect(() => {\n    setUser(getCurrentUser());\n    // Load selected foods from localStorage\n    const savedFoods = localStorage.getItem('selectedFoods');\n    if (savedFoods) {\n      setSelectedFoods(JSON.parse(savedFoods));\n    }\n  }, []);\n  const handleFoodSelect = selectedFood => {\n    // Check if the food item already exists in the order\n    const existingFoodIndex = selectedFoods.findIndex(food => food.code === selectedFood.code);\n    let updatedFoods;\n    if (existingFoodIndex !== -1) {\n      // If food exists, update the quantity\n      updatedFoods = [...selectedFoods];\n      updatedFoods[existingFoodIndex].quantity += selectedFood.quantity;\n    } else {\n      // If new food item, add to the list\n      updatedFoods = [...selectedFoods, selectedFood];\n    }\n    setSelectedFoods(updatedFoods);\n    localStorage.setItem('selectedFoods', JSON.stringify(updatedFoods));\n  };\n  const handleRemoveFood = index => {\n    const updatedFoods = selectedFoods.filter((_, i) => i !== index);\n    setSelectedFoods(updatedFoods);\n    localStorage.setItem('selectedFoods', JSON.stringify(updatedFoods));\n  };\n  const handleMenuUpdate = () => {\n    // Force re-render of FoodEntry component when menu is updated\n    setMenuKey(prev => prev + 1);\n  };\n  const getButtonStyle = () => {\n    if ((user === null || user === void 0 ? void 0 : user.hotelId) === 'matoshree') {\n      return showManagement ? 'btn-secondary' : 'btn-primary';\n    }\n    return '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        margin: '20px 0',\n        padding: '0 20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: (user === null || user === void 0 ? void 0 : user.hotelId) === 'matoshree' ? '#C41E3A' : '#2c3e50'\n        },\n        children: [user === null || user === void 0 ? void 0 : user.hotelName, \" - Menu \", showManagement ? 'Management' : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), (user === null || user === void 0 ? void 0 : user.isAdmin) && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowManagement(!showManagement),\n        className: getButtonStyle(),\n        style: {\n          padding: '10px 20px',\n          backgroundColor: (user === null || user === void 0 ? void 0 : user.hotelId) === 'matoshree' ? 'inherit' : showManagement ? '#dc3545' : '#007bff',\n          color: 'white',\n          border: (user === null || user === void 0 ? void 0 : user.hotelId) === 'matoshree' ? 'inherit' : 'none',\n          borderRadius: '6px',\n          cursor: 'pointer',\n          fontSize: '16px',\n          transition: 'all 0.3s'\n        },\n        children: showManagement ? 'Back to Menu' : 'Manage Menu'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), showManagement && user !== null && user !== void 0 && user.isAdmin ? /*#__PURE__*/_jsxDEV(MenuManagement, {\n      onMenuUpdate: handleMenuUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(FoodEntry, {\n        onFoodSelect: handleFoodSelect\n      }, menuKey, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(FoodSelection, {\n        selectedFoods: selectedFoods,\n        onRemoveFood: handleRemoveFood\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_s(MenuPage, \"oXE+efxhQOqISZTD8PrlGpeq3Ys=\");\n_c = MenuPage;\nexport default MenuPage;\nvar _c;\n$RefreshReg$(_c, \"MenuPage\");","map":{"version":3,"names":["React","useState","useEffect","FoodEntry","FoodSelection","MenuManagement","getCurrentUser","jsxDEV","_jsxDEV","Fragment","_Fragment","MenuPage","_s","selectedFoods","setSelectedFoods","showManagement","setShowManagement","user","setUser","menuKey","setMenuKey","savedFoods","localStorage","getItem","JSON","parse","handleFoodSelect","selectedFood","existingFoodIndex","findIndex","food","code","updatedFoods","quantity","setItem","stringify","handleRemoveFood","index","filter","_","i","handleMenuUpdate","prev","getButtonStyle","hotelId","children","style","display","justifyContent","alignItems","margin","padding","color","hotelName","fileName","_jsxFileName","lineNumber","columnNumber","isAdmin","onClick","className","backgroundColor","border","borderRadius","cursor","fontSize","transition","onMenuUpdate","onFoodSelect","onRemoveFood","_c","$RefreshReg$"],"sources":["C:/Users/vkale/Documents/Vikas/New project/hotel-website/src/pages/MenuPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FoodEntry from '../components/FoodMenu/FoodEntry';\nimport FoodSelection from '../components/FoodMenu/FoodSelection';\nimport MenuManagement from '../components/Menu/MenuManagement';\nimport { getCurrentUser } from '../services/authService';\nimport '../styles/components/FoodMenu.css';\nimport '../styles/components/MenuManagement.css';\n\nconst MenuPage = () => {\n    const [selectedFoods, setSelectedFoods] = useState([]);\n    const [showManagement, setShowManagement] = useState(false);\n    const [user, setUser] = useState(null);\n    const [menuKey, setMenuKey] = useState(0); // Force re-render when menu updates\n\n    useEffect(() => {\n        setUser(getCurrentUser());\n        // Load selected foods from localStorage\n        const savedFoods = localStorage.getItem('selectedFoods');\n        if (savedFoods) {\n            setSelectedFoods(JSON.parse(savedFoods));\n        }\n    }, []);\n\n    const handleFoodSelect = (selectedFood) => {\n        // Check if the food item already exists in the order\n        const existingFoodIndex = selectedFoods.findIndex(food => food.code === selectedFood.code);\n        \n        let updatedFoods;\n        if (existingFoodIndex !== -1) {\n            // If food exists, update the quantity\n            updatedFoods = [...selectedFoods];\n            updatedFoods[existingFoodIndex].quantity += selectedFood.quantity;\n        } else {\n            // If new food item, add to the list\n            updatedFoods = [...selectedFoods, selectedFood];\n        }\n        \n        setSelectedFoods(updatedFoods);\n        localStorage.setItem('selectedFoods', JSON.stringify(updatedFoods));\n    };\n\n    const handleRemoveFood = (index) => {\n        const updatedFoods = selectedFoods.filter((_, i) => i !== index);\n        setSelectedFoods(updatedFoods);\n        localStorage.setItem('selectedFoods', JSON.stringify(updatedFoods));\n    };\n\n    const handleMenuUpdate = () => {\n        // Force re-render of FoodEntry component when menu is updated\n        setMenuKey(prev => prev + 1);\n    };\n\n    const getButtonStyle = () => {\n        if (user?.hotelId === 'matoshree') {\n            return showManagement ? 'btn-secondary' : 'btn-primary';\n        }\n        return '';\n    };\n\n    return (\n        <div>\n            <div style={{ \n                display: 'flex', \n                justifyContent: 'space-between', \n                alignItems: 'center', \n                margin: '20px 0', \n                padding: '0 20px' \n            }}>\n                <h1 style={{ color: user?.hotelId === 'matoshree' ? '#C41E3A' : '#2c3e50' }}>\n                    {user?.hotelName} - Menu {showManagement ? 'Management' : ''}\n                </h1>\n                {user?.isAdmin && (\n                    <button\n                        onClick={() => setShowManagement(!showManagement)}\n                        className={getButtonStyle()}\n                        style={{\n                            padding: '10px 20px',\n                            backgroundColor: user?.hotelId === 'matoshree' ? 'inherit' : (showManagement ? '#dc3545' : '#007bff'),\n                            color: 'white',\n                            border: user?.hotelId === 'matoshree' ? 'inherit' : 'none',\n                            borderRadius: '6px',\n                            cursor: 'pointer',\n                            fontSize: '16px',\n                            transition: 'all 0.3s'\n                        }}\n                    >\n                        {showManagement ? 'Back to Menu' : 'Manage Menu'}\n                    </button>\n                )}\n            </div>\n\n            {showManagement && user?.isAdmin ? (\n                <MenuManagement onMenuUpdate={handleMenuUpdate} />\n            ) : (\n                <>\n                    <FoodEntry key={menuKey} onFoodSelect={handleFoodSelect} />\n                    <FoodSelection \n                        selectedFoods={selectedFoods} \n                        onRemoveFood={handleRemoveFood}\n                    />\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default MenuPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
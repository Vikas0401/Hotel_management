{"ast":null,"code":"import _objectSpread from\"C:/Users/vkale/Documents/Vikas/Hotel_managenment/Hotel_management/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import FoodEntry from'../components/FoodMenu/FoodEntry';import FoodSelection from'../components/FoodMenu/FoodSelection';import MenuManagement from'../components/Menu/MenuManagement';import{getCurrentUser}from'../services/authService';import'../styles/components/FoodMenu.css';import'../styles/components/MenuManagement.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MenuPage=()=>{const[selectedFoods,setSelectedFoods]=useState([]);const[showManagement,setShowManagement]=useState(false);const[user,setUser]=useState(null);const[menuKey,setMenuKey]=useState(0);// Force re-render when menu updates\nuseEffect(()=>{setUser(getCurrentUser());// Load selected foods from localStorage\nconst savedFoods=localStorage.getItem('selectedFoods');if(savedFoods){setSelectedFoods(JSON.parse(savedFoods));}},[]);const handleFoodSelect=selectedFood=>{// Check if the food item already exists in the order\nconst existingFoodIndex=selectedFoods.findIndex(food=>food.code===selectedFood.code);let updatedFoods;if(existingFoodIndex!==-1){// If food exists, update the quantity\nupdatedFoods=[...selectedFoods];updatedFoods[existingFoodIndex].quantity+=selectedFood.quantity;}else{// If new food item, add to the list\nupdatedFoods=[...selectedFoods,selectedFood];}setSelectedFoods(updatedFoods);localStorage.setItem('selectedFoods',JSON.stringify(updatedFoods));};const handleRemoveFood=index=>{const updatedFoods=selectedFoods.filter((_,i)=>i!==index);setSelectedFoods(updatedFoods);localStorage.setItem('selectedFoods',JSON.stringify(updatedFoods));};const handleMenuUpdate=()=>{// Force re-render of FoodEntry component when menu is updated\nsetMenuKey(prev=>prev+1);};const getButtonStyle=()=>{const baseStyle={padding:'10px 20px',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'16px',fontWeight:'500',transition:'all 0.3s ease',textTransform:'uppercase',letterSpacing:'0.5px'};if((user===null||user===void 0?void 0:user.hotelId)==='matoshree'){if(showManagement){// Back to Menu button (secondary style for Matoshree)\nreturn _objectSpread(_objectSpread({},baseStyle),{},{background:'linear-gradient(135deg, #FFD700, #FF8C00)',color:'#2C1810',border:'2px solid #C41E3A',boxShadow:'0 4px 15px rgba(255, 215, 0, 0.3)'});}else{// Manage Menu button (primary style for Matoshree)\nreturn _objectSpread(_objectSpread({},baseStyle),{},{background:'linear-gradient(135deg, #C41E3A, #A01B32)',border:'2px solid #FFD700',boxShadow:'0 4px 15px rgba(196, 30, 58, 0.3)'});}}else{// Default hotel styling\nreturn _objectSpread(_objectSpread({},baseStyle),{},{backgroundColor:showManagement?'#dc3545':'#007bff'});}};const handleButtonHover=(e,isHover)=>{if((user===null||user===void 0?void 0:user.hotelId)==='matoshree'){if(showManagement){// Back to Menu hover\ne.target.style.background=isHover?'linear-gradient(135deg, #FF8C00, #FFD700)':'linear-gradient(135deg, #FFD700, #FF8C00)';e.target.style.transform=isHover?'translateY(-2px)':'translateY(0)';e.target.style.boxShadow=isHover?'0 6px 20px rgba(255, 140, 0, 0.4)':'0 4px 15px rgba(255, 215, 0, 0.3)';}else{// Manage Menu hover\ne.target.style.background=isHover?'linear-gradient(135deg, #A01B32, #C41E3A)':'linear-gradient(135deg, #C41E3A, #A01B32)';e.target.style.transform=isHover?'translateY(-2px)':'translateY(0)';e.target.style.boxShadow=isHover?'0 6px 20px rgba(196, 30, 58, 0.4)':'0 4px 15px rgba(196, 30, 58, 0.3)';}}else{// Default hotel hover\ne.target.style.backgroundColor=isHover?showManagement?'#c82333':'#0056b3':showManagement?'#dc3545':'#007bff';}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',margin:'20px 0',padding:'0 20px'},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{color:(user===null||user===void 0?void 0:user.hotelId)==='matoshree'?'#C41E3A':'#2c3e50'},className:(user===null||user===void 0?void 0:user.hotelId)==='matoshree'?'menu-page-title':'',children:[/*#__PURE__*/_jsx(\"span\",{className:(user===null||user===void 0?void 0:user.hotelId)==='matoshree'?'hotel-matoshree-name':'',children:user===null||user===void 0?void 0:user.hotelName}),\" - \\u092E\\u0947\\u0928\\u0942 \",showManagement?'व्यवस्थापन':'']}),(user===null||user===void 0?void 0:user.isAdmin)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManagement(!showManagement),style:getButtonStyle(),onMouseEnter:e=>handleButtonHover(e,true),onMouseLeave:e=>handleButtonHover(e,false),children:showManagement?'मेनूवर परत जा':'मेनू व्यवस्थापन'})]}),showManagement&&user!==null&&user!==void 0&&user.isAdmin?/*#__PURE__*/_jsx(MenuManagement,{onMenuUpdate:handleMenuUpdate}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FoodEntry,{onFoodSelect:handleFoodSelect},menuKey),/*#__PURE__*/_jsx(FoodSelection,{selectedFoods:selectedFoods,onRemoveFood:handleRemoveFood})]})]});};export default MenuPage;","map":{"version":3,"names":["React","useState","useEffect","FoodEntry","FoodSelection","MenuManagement","getCurrentUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MenuPage","selectedFoods","setSelectedFoods","showManagement","setShowManagement","user","setUser","menuKey","setMenuKey","savedFoods","localStorage","getItem","JSON","parse","handleFoodSelect","selectedFood","existingFoodIndex","findIndex","food","code","updatedFoods","quantity","setItem","stringify","handleRemoveFood","index","filter","_","i","handleMenuUpdate","prev","getButtonStyle","baseStyle","padding","color","border","borderRadius","cursor","fontSize","fontWeight","transition","textTransform","letterSpacing","hotelId","_objectSpread","background","boxShadow","backgroundColor","handleButtonHover","e","isHover","target","style","transform","children","display","justifyContent","alignItems","margin","className","hotelName","isAdmin","onClick","onMouseEnter","onMouseLeave","onMenuUpdate","onFoodSelect","onRemoveFood"],"sources":["C:/Users/vkale/Documents/Vikas/Hotel_managenment/Hotel_management/src/pages/MenuPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FoodEntry from '../components/FoodMenu/FoodEntry';\nimport FoodSelection from '../components/FoodMenu/FoodSelection';\nimport MenuManagement from '../components/Menu/MenuManagement';\nimport { getCurrentUser } from '../services/authService';\nimport '../styles/components/FoodMenu.css';\nimport '../styles/components/MenuManagement.css';\n\nconst MenuPage = () => {\n    const [selectedFoods, setSelectedFoods] = useState([]);\n    const [showManagement, setShowManagement] = useState(false);\n    const [user, setUser] = useState(null);\n    const [menuKey, setMenuKey] = useState(0); // Force re-render when menu updates\n\n    useEffect(() => {\n        setUser(getCurrentUser());\n        // Load selected foods from localStorage\n        const savedFoods = localStorage.getItem('selectedFoods');\n        if (savedFoods) {\n            setSelectedFoods(JSON.parse(savedFoods));\n        }\n    }, []);\n\n    const handleFoodSelect = (selectedFood) => {\n        // Check if the food item already exists in the order\n        const existingFoodIndex = selectedFoods.findIndex(food => food.code === selectedFood.code);\n        \n        let updatedFoods;\n        if (existingFoodIndex !== -1) {\n            // If food exists, update the quantity\n            updatedFoods = [...selectedFoods];\n            updatedFoods[existingFoodIndex].quantity += selectedFood.quantity;\n        } else {\n            // If new food item, add to the list\n            updatedFoods = [...selectedFoods, selectedFood];\n        }\n        \n        setSelectedFoods(updatedFoods);\n        localStorage.setItem('selectedFoods', JSON.stringify(updatedFoods));\n    };\n\n    const handleRemoveFood = (index) => {\n        const updatedFoods = selectedFoods.filter((_, i) => i !== index);\n        setSelectedFoods(updatedFoods);\n        localStorage.setItem('selectedFoods', JSON.stringify(updatedFoods));\n    };\n\n    const handleMenuUpdate = () => {\n        // Force re-render of FoodEntry component when menu is updated\n        setMenuKey(prev => prev + 1);\n    };\n\n    const getButtonStyle = () => {\n        const baseStyle = {\n            padding: '10px 20px',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '16px',\n            fontWeight: '500',\n            transition: 'all 0.3s ease',\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px'\n        };\n\n        if (user?.hotelId === 'matoshree') {\n            if (showManagement) {\n                // Back to Menu button (secondary style for Matoshree)\n                return {\n                    ...baseStyle,\n                    background: 'linear-gradient(135deg, #FFD700, #FF8C00)',\n                    color: '#2C1810',\n                    border: '2px solid #C41E3A',\n                    boxShadow: '0 4px 15px rgba(255, 215, 0, 0.3)'\n                };\n            } else {\n                // Manage Menu button (primary style for Matoshree)\n                return {\n                    ...baseStyle,\n                    background: 'linear-gradient(135deg, #C41E3A, #A01B32)',\n                    border: '2px solid #FFD700',\n                    boxShadow: '0 4px 15px rgba(196, 30, 58, 0.3)'\n                };\n            }\n        } else {\n            // Default hotel styling\n            return {\n                ...baseStyle,\n                backgroundColor: showManagement ? '#dc3545' : '#007bff'\n            };\n        }\n    };\n\n    const handleButtonHover = (e, isHover) => {\n        if (user?.hotelId === 'matoshree') {\n            if (showManagement) {\n                // Back to Menu hover\n                e.target.style.background = isHover \n                    ? 'linear-gradient(135deg, #FF8C00, #FFD700)' \n                    : 'linear-gradient(135deg, #FFD700, #FF8C00)';\n                e.target.style.transform = isHover ? 'translateY(-2px)' : 'translateY(0)';\n                e.target.style.boxShadow = isHover \n                    ? '0 6px 20px rgba(255, 140, 0, 0.4)' \n                    : '0 4px 15px rgba(255, 215, 0, 0.3)';\n            } else {\n                // Manage Menu hover\n                e.target.style.background = isHover \n                    ? 'linear-gradient(135deg, #A01B32, #C41E3A)' \n                    : 'linear-gradient(135deg, #C41E3A, #A01B32)';\n                e.target.style.transform = isHover ? 'translateY(-2px)' : 'translateY(0)';\n                e.target.style.boxShadow = isHover \n                    ? '0 6px 20px rgba(196, 30, 58, 0.4)' \n                    : '0 4px 15px rgba(196, 30, 58, 0.3)';\n            }\n        } else {\n            // Default hotel hover\n            e.target.style.backgroundColor = isHover \n                ? (showManagement ? '#c82333' : '#0056b3')\n                : (showManagement ? '#dc3545' : '#007bff');\n        }\n    };\n\n    return (\n        <div>\n            <div style={{ \n                display: 'flex', \n                justifyContent: 'space-between', \n                alignItems: 'center', \n                margin: '20px 0', \n                padding: '0 20px' \n            }}>\n                <h1 style={{ color: user?.hotelId === 'matoshree' ? '#C41E3A' : '#2c3e50' }} className={user?.hotelId === 'matoshree' ? 'menu-page-title' : ''}>\n                    <span className={user?.hotelId === 'matoshree' ? 'hotel-matoshree-name' : ''}>{user?.hotelName}</span> - मेनू {showManagement ? 'व्यवस्थापन' : ''}\n                </h1>\n                {user?.isAdmin && (\n                    <button\n                        onClick={() => setShowManagement(!showManagement)}\n                        style={getButtonStyle()}\n                        onMouseEnter={(e) => handleButtonHover(e, true)}\n                        onMouseLeave={(e) => handleButtonHover(e, false)}\n                    >\n                        {showManagement ? 'मेनूवर परत जा' : 'मेनू व्यवस्थापन'}\n                    </button>\n                )}\n            </div>\n\n            {showManagement && user?.isAdmin ? (\n                <MenuManagement onMenuUpdate={handleMenuUpdate} />\n            ) : (\n                <>\n                    <FoodEntry key={menuKey} onFoodSelect={handleFoodSelect} />\n                    <FoodSelection \n                        selectedFoods={selectedFoods} \n                        onRemoveFood={handleRemoveFood}\n                    />\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default MenuPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}